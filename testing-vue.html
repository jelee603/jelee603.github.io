<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="viewport-fit=cover"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/6eca03e35c9c9eae.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6eca03e35c9c9eae.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-63157d71ad419e09.js" defer=""></script><script src="/_next/static/chunks/main-63b5e73f15fce3bf.js" defer=""></script><script src="/_next/static/chunks/pages/_app-220f73948b70f663.js" defer=""></script><script src="/_next/static/chunks/23-1e1b6cd9f6a2e676.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-7d709a5d09fee3dd.js" defer=""></script><script src="/_next/static/n1F0CVZ8gd7T38i1_wAcz/_buildManifest.js" defer=""></script><script src="/_next/static/n1F0CVZ8gd7T38i1_wAcz/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="sc-45b68ef7-0 ieAueO"><nav class="sc-45b68ef7-1 cDSFRs"><div class="sc-45b68ef7-2 iKGhce"><a href="/">Home</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/React/react-condition">React</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/Vue/vuejs">Vue</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/JavaScript/es6">JavaScript</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/TypeScript/typescript">TypeScript</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/HTML_CSS/browser-operation">HTML/CSS</a></div><div class="sc-45b68ef7-2 iKGhce"><a href="/ToyProject">Toy Project</a></div><a href="/profile"><div class="sc-45b68ef7-3 TXhNy"></div></a></nav></header><section class="sc-53569208-0 qXGRu"><h1 class="sc-53569208-1 kqSQaB">Vue.js 2.x 테스트 적용기</h1><h6>2019-10-17</h6><article class="sc-53569208-2 lhbsva"><h3>라이브러리 설치하면서 만나게 되었던 버그들</h3>
<p>vue-cli 3.x 를 받게되면 자동으로 test 를 할 수 있는 환경이 구축되는데 프로젝트가 그렇게 쉽게 올라가는 건 아니니 2019년도에 작성한 블로그이니, 지금은 3.0 을 사용하면 된다.</p>
<p>기존 프로젝트를 위한 2.x 에 테스트 작업환경을 추가를 해보았다. 일단은 가장 많이 사용하는 jest 를 설정해보았다.
<a href="https://vue-test-utils.vuejs.org">Vue Test Util</a> 을 참고하고 <a href="https://joshua1988.github.io/vue-camp/testing/getting-started.html#%EB%B7%B0-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%98%88%EC%8B%9C">joshua1988</a>님 블로그르 참고하면서 설치해보았다.</p>
<pre><code>npm install --save-dev jest @vue/test-utils vue-jest babel-jest
</code></pre>
<p>설치하고 babelrc 파일을 추가하는데 babel 스펙이 변하면서 다음과 같은 오류를 만나게 된다.</p>
<blockquote>
<p>Cannot find moudle 'babel-preset-env' - Div you mean "@babel/env?"</p>
<p>해결 방법</p>
<pre><code>// babelrc
{
 - "presets": [["env", { "modules": false }]],
 + "presets": [["@babel/preset-env", { "modules": false }]],
 "env": {
   "test": {
 - "presets": [["@babel/preset-env", { "targets": { "node": "current" } }]]
 + "presets": [["env", { "targets": { "node": "current" } }]]
   }
 }
}
</code></pre>
<pre><code>// package.json
{...
   "jest": {
       "transform": {
         ".*\\.(vue)$": "vue-jest",
         "^.+\\.js$": "babel-jest"
       },
       "collectCoverage": true
   }
}
</code></pre>
</blockquote>
<p>그 다음에 만나게 되는 오류를 해결하면 샘플 코드 작성이 가능하다.</p>
<blockquote>
<p>Requires Babel "^7.0.0-0", but was loaded with "6.x"</p>
<p>해결 방법</p>
<pre><code>$ npm insatll -D babel-core@^7.0.0-0
</code></pre>
</blockquote>
<blockquote>
<p>Cannot find module '@/components/HelloWorld.vue' from 'helloworld.test.js'</p>
<p>해결 방법</p>
<pre><code>// helloworld.test.js
import HelloWorld from '../src/components/HelloWorld.vue';
</code></pre>
<p>@ 절대주소는 일단 모듈로 인식해서 파일을 찾을 수 없다한다. 우선은 상대경로로 작업해주자.</p>
</blockquote>
<p>이렇게 해결을 하고 나면, 실제로 test/ 파일에 샘플 코드를 작성할 수 있다.</p>
</article></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Vue.js 2.x 테스트 적용기","slug":"testing-vue","date":"2019-10-17","content":"\u003ch3\u003e라이브러리 설치하면서 만나게 되었던 버그들\u003c/h3\u003e\n\u003cp\u003evue-cli 3.x 를 받게되면 자동으로 test 를 할 수 있는 환경이 구축되는데 프로젝트가 그렇게 쉽게 올라가는 건 아니니 2019년도에 작성한 블로그이니, 지금은 3.0 을 사용하면 된다.\u003c/p\u003e\n\u003cp\u003e기존 프로젝트를 위한 2.x 에 테스트 작업환경을 추가를 해보았다. 일단은 가장 많이 사용하는 jest 를 설정해보았다.\n\u003ca href=\"https://vue-test-utils.vuejs.org\"\u003eVue Test Util\u003c/a\u003e 을 참고하고 \u003ca href=\"https://joshua1988.github.io/vue-camp/testing/getting-started.html#%EB%B7%B0-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%98%88%EC%8B%9C\"\u003ejoshua1988\u003c/a\u003e님 블로그르 참고하면서 설치해보았다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpm install --save-dev jest @vue/test-utils vue-jest babel-jest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e설치하고 babelrc 파일을 추가하는데 babel 스펙이 변하면서 다음과 같은 오류를 만나게 된다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCannot find moudle 'babel-preset-env' - Div you mean \"@babel/env?\"\u003c/p\u003e\n\u003cp\u003e해결 방법\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// babelrc\n{\n - \"presets\": [[\"env\", { \"modules\": false }]],\n + \"presets\": [[\"@babel/preset-env\", { \"modules\": false }]],\n \"env\": {\n   \"test\": {\n - \"presets\": [[\"@babel/preset-env\", { \"targets\": { \"node\": \"current\" } }]]\n + \"presets\": [[\"env\", { \"targets\": { \"node\": \"current\" } }]]\n   }\n }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e// package.json\n{...\n   \"jest\": {\n       \"transform\": {\n         \".*\\\\.(vue)$\": \"vue-jest\",\n         \"^.+\\\\.js$\": \"babel-jest\"\n       },\n       \"collectCoverage\": true\n   }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e그 다음에 만나게 되는 오류를 해결하면 샘플 코드 작성이 가능하다.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRequires Babel \"^7.0.0-0\", but was loaded with \"6.x\"\u003c/p\u003e\n\u003cp\u003e해결 방법\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ npm insatll -D babel-core@^7.0.0-0\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCannot find module '@/components/HelloWorld.vue' from 'helloworld.test.js'\u003c/p\u003e\n\u003cp\u003e해결 방법\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e// helloworld.test.js\nimport HelloWorld from '../src/components/HelloWorld.vue';\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e@ 절대주소는 일단 모듈로 인식해서 파일을 찾을 수 없다한다. 우선은 상대경로로 작업해주자.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e이렇게 해결을 하고 나면, 실제로 test/ 파일에 샘플 코드를 작성할 수 있다.\u003c/p\u003e\n","category":"Vue"}},"__N_SSG":true},"page":"/[slug]","query":{"slug":"testing-vue"},"buildId":"n1F0CVZ8gd7T38i1_wAcz","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>